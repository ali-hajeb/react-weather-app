(this["webpackJsonpreact-weather-app"]=this["webpackJsonpreact-weather-app"]||[]).push([[0],{14:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var c=a(0),s=a(1),i=a.n(s),n=a(8),r=a.n(n),l=a(5),d=a(2),o=a(3),h=a(6),j=a(4),m=(a(14),a.p+"static/media/cloud-light.2f40900e.svg"),u=a.p+"static/media/cloud-moon.abfebffd.svg",v=a.p+"static/media/cloud-rain-light.05040c61.svg",b=a.p+"static/media/cloud-snow-light.a694d0ab.svg",g=a.p+"static/media/cloud-sun.f42a43c9.svg",x=a.p+"static/media/cloudy.eea4ac38.svg",p=a.p+"static/media/moon.4ef1b02e.svg",O=a.p+"static/media/rainy.3e89e664.svg",f=a.p+"static/media/snow.7b3132d5.svg",y=a.p+"static/media/sunny.6925e579.svg",N=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return"https://api.weatherapi.com/v1/".concat(e,".json?key=3ab1311cd12149f0bd6125133202409&q=").concat(t)+a},w=[1063,1072,1150,1153,1168,1169,1171,1180,1183,1186,1189,1192,1195,1198,1201,1204,1207,1240,1243,1246],S=[1066,1114,1117,1210,1213,1216,1219,1222,1225,1255,1258,1279,1282],k=[1273,1276],C=[1279,1282],T=[1003,1006,1009,1135,1147,1030],I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return 1e3===e?t?y:p:1003===e||1006===e?t?g:u:T.includes(e)?x:w.includes(e)?O:S.includes(e)?f:k.includes(e)?v:C.includes(e)?b:1087===e?m:void 0},D=["Jan","Feb","Ma","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],_=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],A=function(e){return e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth},E=function(e){e.target.setAttribute("aria-hidden",!0)},F=function(){var e=document.getElementById("overlayer"),t=document.getElementById("s");e.setAttribute("aria-hidden",!1),t.focus()},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.preventDefault();var a=e.target.dataset.toggle,c=document.querySelector(a);if("false"===c.getAttribute("aria-expanded")){c.classList.toggle("show");var s=c.clientHeight;c.style.height=t?"".concat(t,"px"):"0px",setTimeout((function(){c.style.height=s-30+"px"}),10),e.target.innerText="Show less",c.setAttribute("aria-expanded",!0)}else c.style.height=t?"".concat(t,"px"):"0px",setTimeout((function(){c.classList.toggle("show"),c.style.removeProperty("height")}),500),e.target.innerText="Show more",c.setAttribute("aria-expanded",!1)},M=function(e){e.target.classList.toggle("pressed")},W=a.p+"static/media/sunrise.e0448ed2.svg",B=a.p+"static/media/sunset.823f3a4f.svg",H=a.p+"static/media/temperature-high.682ad1f4.svg",J=a.p+"static/media/temperature-low.1ee045ce.svg",U=a.p+"static/media/temperature-avg.bcee7b76.svg",z=a.p+"static/media/eye.9ddf0c1b.svg",q=a.p+"static/media/cloud-rain.82a06616.svg",P=a.p+"static/media/humidity.1cbff4e5.svg",R=function(e){var t=e.astro,a=e.day,s=t.sunrise,i=t.sunset,n=a.avghumidity,r=a.avgtemp_c,d=a.maxtemp_c,o=a.mintemp_c,h=a.uv,j=a.daily_chance_of_rain,m=a.avgvis_km,u=[[Object(c.jsx)("img",{src:H,alt:"Max Temperature",width:"25"}),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"title-table",children:"Max"}),parseInt(d),"\xb0C"]}),Object(c.jsx)("img",{src:W,alt:"Sunrise",width:"25"}),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"title-table",children:"Sunrise"}),s]}),Object(c.jsx)("i",{className:"f",children:"UV"}),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"title-table",children:"Index"}),h]})],[Object(c.jsx)("img",{src:U,alt:"Avg Temperature",width:"25"}),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"title-table",children:"Avg"}),parseInt(r),"\xb0C"]}),Object(c.jsx)("img",{src:B,alt:"Sunset",width:"25"}),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"title-table",children:"Sunset"}),i]}),Object(c.jsx)("img",{src:q,alt:"Chance of Rain",width:"25"}),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"title-table",children:"Chance"}),j,"%"]})],[Object(c.jsx)("img",{src:J,alt:"Low Temperature",width:"25"}),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"title-table",children:"Min"}),parseInt(o),"\xb0C"]}),Object(c.jsx)("img",{src:P,alt:"Humidity",width:"18"}),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"title-table",children:"Humidity"}),n,"%"]}),Object(c.jsx)("img",{src:z,alt:"Visibility",width:"25"}),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"title-table",children:"Visibility"}),m,"km"]})]].map((function(e,t){var a,s=[],i=0,n=Object(l.a)(e);try{for(n.s();!(a=n.n()).done;){var r=a.value;s.push(Object(c.jsx)("td",{children:r},i++))}}catch(d){n.e(d)}finally{n.f()}return Object(c.jsx)("tr",{children:s},t)}));return Object(c.jsx)("div",{id:"details",className:"weather-detail","aria-expanded":"false",children:Object(c.jsx)("table",{className:"mui-table mui-table--bordered",children:Object(c.jsx)("tbody",{className:"table-fa",children:u})})})},V=a.p+"static/media/clock.120c03e2.svg",$=a.p+"static/media/umbrella.39ffd3c0.svg",G=function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0;return e.slice(t,a).map((function(e,t){var a=e.condition,s=e.temp_c,i=e.is_day,n=e.chance_of_rain,r=e.time,l=a.code,d=a.text,o=r.split(" ");return Object(c.jsxs)("div",{className:"hourly-item",children:[Object(c.jsx)("div",{className:"hourly-item-clock",children:Object(c.jsx)("img",{src:V,alt:"Clock",width:"16",height:"16"})}),Object(c.jsx)("div",{className:"hourly-time",children:o[1]}),Object(c.jsx)("img",{className:"hourly-ico",src:I(l,i),alt:d}),Object(c.jsxs)("div",{className:"hourly-temp",children:[parseInt(s)," \xb0C"]}),Object(c.jsx)("div",{className:"hourly-desc",children:d}),Object(c.jsxs)("div",{children:[Object(c.jsx)("img",{src:$,alt:"Clock",width:"16",height:"16"})," ",n,"%"]})]},t)}))},a=(new Date).getHours(),s=e[0].hour.slice(a);if(s.length<24){var i=24-s.length;s=s.concat(e[1].hour.slice(0,i))}var n=t(s,0,12),r=t(s,12,24);return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{id:"hourly",className:"bot","aria-expanded":"false",children:Object(c.jsxs)("div",{className:"hourly-container",children:[Object(c.jsx)("div",{className:"hourly-col mr-lg-6",children:n}),Object(c.jsx)("div",{className:"hourly-col ml-lg-6",children:r})]})}),Object(c.jsx)("button",{"data-toggle":"#hourly",className:"a-toggle",onTouchStart:M,onTouchEnd:M,onClick:function(e){return L(e,160)},children:"Show more"})]})},K=a.p+"static/media/spinner.7a221789.svg",Q=a.p+"static/media/search-w.dd7ac1e6.svg",X=a.p+"static/media/location.4d48955c.svg",Y=function(e){var t=e.search.length?e.search.map((function(t){var a=t.lat,s=t.lon,i=t.id,n=t.name,r=t.country;return Object(c.jsxs)("li",{id:i,onTouchStart:M,onTouchEnd:M,onClick:function(){return function(t,a){e.onClick(t+","+a),document.getElementById("overlayer").setAttribute("aria-hidden",!0)}(a,s)},className:"list-item",children:[Object(c.jsx)("img",{src:X,alt:"Location",width:"16"})," ",n.split(",")[0]+", "+r]},i)})):Object(c.jsx)("h4",{className:"search-404",children:"Nothing to show"});return Object(c.jsx)("div",{className:"search-result",children:Object(c.jsx)("ul",{className:"result-list",children:t})})},Z=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(d.a)(this,a);for(var c=arguments.length,s=new Array(c),i=0;i<c;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={city:null,cities:[]},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=null,a=!0,c=document.getElementById("s"),s=document.querySelector(".search-icon");c.addEventListener("keyup",(function(i){clearTimeout(t),a&&(s.innerHTML="<img src=".concat(K," alt=\"Spinner\" class='fa-pulse' width='16' />"),a=!1),t=setTimeout((function(){c.value&&(e.setState({city:c.value}),fetch(N("search",e.state.city)).then((function(e){return e.json()})).then((function(t){var c=t;s.innerHTML="<img src=".concat(Q," alt=\"Search\" width='16' />"),a=!0,e.setState({cities:c})})))}),750)}))}},{key:"render",value:function(){return Object(c.jsx)("div",{id:"overlayer","aria-hidden":"true",onClick:E,onTouchStart:E,children:Object(c.jsxs)("div",{className:"search-page","aria-hidden":"false",children:[Object(c.jsxs)("div",{className:"search-bar",children:[Object(c.jsx)("div",{className:"search-icon",children:Object(c.jsx)("img",{src:Q,alt:"Search",width:"16"})}),Object(c.jsx)("div",{className:"search-input-holder",children:Object(c.jsx)("input",{id:"s",type:"search",className:"search-input",placeholder:"Search ..."})})]}),Y({search:this.state.cities,onClick:this.props.onClick})]})})}}]),a}(s.Component),ee=a.p+"static/media/cloud.e2beacb1.svg",te=function(e){for(var t=e.map((function(e,t){var a=e.date,s=e.day,i=s.avgtemp_c,n=s.condition,r=n.code,l=n.text,d=n.is_day,o=new Date(a),h=D[o.getMonth()]+" "+o.getDate(),j=_[o.getDay()];return Object(c.jsx)("div",{className:"daily-item",children:Object(c.jsxs)("div",{className:"weather-card",children:[Object(c.jsx)("div",{className:"card-day",children:j}),Object(c.jsx)("div",{className:"card-date-time",children:h}),Object(c.jsx)("div",{className:"card-sym",children:Object(c.jsx)("img",{className:"weather-ico-daily",src:I(r,d),alt:l})}),Object(c.jsxs)("h3",{children:[parseInt(i)," \xb0C"]}),Object(c.jsx)("div",{className:"card-dsc",style:{fontSize:"14px"},children:l})]})},t)})),a=[],s=0;s<3;s++)a.push(Object(c.jsx)("div",{className:"daily-item",children:Object(c.jsxs)("div",{className:"weather-card",children:[Object(c.jsx)("div",{className:"card-day",children:Object(c.jsx)("div",{className:"sync-day"})}),Object(c.jsx)("div",{className:"card-date-time",children:Object(c.jsx)("div",{className:"sync-date"})}),Object(c.jsx)("div",{className:"card-sym ",children:Object(c.jsx)("img",{src:ee,alt:"Cloud",className:"ico-4x"})}),Object(c.jsx)("div",{className:"card-temp",children:Object(c.jsx)("div",{className:"sync-temp-daily"})}),Object(c.jsx)("div",{className:"card-dsc",children:Object(c.jsx)("div",{className:"sync-text"})})]})},s+3));return Object(c.jsx)("div",{className:"mid",children:Object(c.jsxs)("div",{className:"daily-table",children:[t,a]})})},ae=function(e){var t=e.location,a=t.name,s=t.region,i=t.country,n=e.current,r=n.temp_c,l=n.is_day,d=e.current.condition,o=d.code,h=d.text;return Object(c.jsx)("div",{className:"t",children:Object(c.jsxs)("div",{className:"top",children:[Object(c.jsxs)("div",{className:"top-city",children:[Object(c.jsx)("h1",{id:"el",style:{marginBottom:"2px"},children:a}),Object(c.jsx)("small",{children:i+", "+s}),Object(c.jsxs)("div",{className:"city-weather",children:[Object(c.jsx)("h2",{children:h}),Object(c.jsx)("button",{"data-toggle":"#details",className:"a-toggle",onTouchStart:M,onTouchEnd:M,onClick:L,children:"Show more"})]})]}),Object(c.jsxs)("div",{className:"top-weather",children:[Object(c.jsx)("div",{className:"weather-sym center",children:Object(c.jsx)("img",{className:"weather-ico",src:I(o,l),alt:h})}),Object(c.jsx)("div",{className:"weather-temp",children:Object(c.jsxs)("h2",{className:"temp-h2",children:[parseInt(r)," \xb0C"]})})]})]})})},ce=a.p+"static/media/search.ac0d491a.svg",se=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var c;Object(d.a)(this,a),(c=t.call(this,e)).handlerListClick=function(e){localStorage.setItem("city",e),c.setState({city:e}),c.getData(e),document.getElementById("s").value=""},c.getData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.state.city;c.setState({loaded:!1}),fetch(N("forecast",e,"&days=5")).then((function(e){if(!e.ok)throw new Error("Unable to fetch weather updates");return e.json()})).then((function(e){localStorage.setItem("weatherData",JSON.stringify(e)),c.setState({current:e.current,location:e.location,forecast:e.forecast,loaded:!0})})).catch((function(e){alert("Unable to fetch weather updates\n(Will load old data if it exists)");var t=JSON.parse(localStorage.getItem("weatherData"));t&&c.setState({current:t.current,location:t.location,forecast:t.forecast,loaded:!0})})),console.log("Data Recieved")},c.setFontSize=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"px",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=parseFloat(e.style.fontSize),s=c;s>=0;s-=a){var i=A(e);i&&(c-=a,e.style.fontSize=c+t)}};var s=localStorage.getItem("city")?localStorage.getItem("city"):"Abadan";return c.state={city:s,loaded:!1,location:{},current:{},forecast:{}},c}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getData(),setInterval(this.getData,3e5)}},{key:"componentDidUpdate",value:function(){var e=document.getElementsByClassName("card-dsc");if(e){var t,a=Object(l.a)(e);try{for(a.s();!(t=a.n()).done;){var c=t.value;this.setFontSize(c,"px",1)}}catch(s){a.e(s)}finally{a.f()}}this.state.loaded&&(document.title="".concat(this.state.location.name," | ").concat(this.state.current.temp_c," \xb0C"))}},{key:"render",value:function(){var e,t,a,s,i=this.state,n=i.location,r=i.current,l=i.forecast;return i.loaded?(e=ae({current:r,location:n}),t=te(l.forecastday),a=G(l.forecastday),s=R(l.forecastday[0])):(e=Object(c.jsx)("div",{className:"t",children:Object(c.jsxs)("div",{className:"top sync",children:[Object(c.jsxs)("div",{className:"top-city",children:[Object(c.jsx)("div",{className:"sync-name"}),Object(c.jsx)("div",{className:"sync-subname"})]}),Object(c.jsxs)("div",{className:"top-weather",children:[Object(c.jsx)("div",{className:"weather-sym center",children:Object(c.jsx)("img",{src:ee,alt:"Cloud",className:"ico-5x"})}),Object(c.jsx)("div",{className:"weather-temp",children:Object(c.jsx)("div",{className:"sync-temp"})})]})]})}),t=function(){for(var e=[],t=0;t<3;t++)e.push(Object(c.jsx)("div",{className:"daily-item",children:Object(c.jsxs)("div",{className:"sync weather-card",children:[Object(c.jsx)("div",{className:"card-day",children:Object(c.jsx)("div",{className:"sync-day"})}),Object(c.jsx)("div",{className:"card-date-time",children:Object(c.jsx)("div",{className:"sync-date"})}),Object(c.jsx)("div",{className:"card-sym ",children:Object(c.jsx)("img",{src:ee,alt:"Cloud",className:"ico-4x"})}),Object(c.jsx)("div",{className:"card-temp",children:Object(c.jsx)("div",{className:"sync-temp-daily"})}),Object(c.jsx)("div",{className:"card-dsc",children:Object(c.jsx)("div",{className:"sync-text"})})]})},t+3));return Object(c.jsx)("div",{className:"mid",children:Object(c.jsx)("div",{className:"daily-table",children:e})})}(),a=null,s=null),Object(c.jsxs)("div",{className:"mui-container-fluid mb",children:[Object(c.jsx)("button",{"aria-label":"Search",name:"Search",className:"btn btn-search",variant:"fab",onTouchStart:M,onTouchEnd:M,onClick:F,children:Object(c.jsx)("img",{src:ce,alt:"Search",width:"16"})}),e,s,t,a,Object(c.jsx)(Z,{onClick:this.handlerListClick})]})}}]),a}(s.Component),ie=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ne(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(se,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/react-weather-app",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/react-weather-app","/service-worker.js");ie?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var c=a.headers.get("content-type");404===a.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ne(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):ne(t,e)}))}}()}},[[15,1,2]]]);
//# sourceMappingURL=main.dd98bdbf.chunk.js.map